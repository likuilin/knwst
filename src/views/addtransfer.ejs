<!doctype html>
<html>
<head>
  <title>knwst - Add Transfer</title>
  <script>
  /// sigh, javascript oh javascript https://stackoverflow.com/questions/6982692/how-to-set-input-type-dates-default-value-to-today
  function toDateInputValue(dateObject) {
    const local = new Date(dateObject);
    local.setMinutes(dateObject.getMinutes() - dateObject.getTimezoneOffset());
    return local.toJSON().slice(0,10);
  };
  window.onload = () => {
    document.getElementById("date").value = toDateInputValue(new Date());
  }
  </script>
</head>
<body>
  <h1>knwst - Add Transfer</h1>
  <p><a href="/">Home</a></p>
  <form action="do_addtx" method="post">
    <input type="hidden" name="ttype" value="" />
    <input type="hidden" name="ticker" value="" />
    <input type="hidden" name="amount" value="" />
    <input type="hidden" name="price_comment" value="" />
    <input type="hidden" name="comm_comment" value="" />
    <input type="hidden" name="locate" value="" />
    <input type="hidden" name="locate_basis" value="" />
    <input type="hidden" name="confirm_comment" value="" />
    <table>
      <tr>
        <td><label for="date">Date</label></td>
        <td><input type="date" id="date" name="date" /></td>
      </tr>
      <tr>
        <td><label for="action">Action</label></td>
        <td><select name="action" id="action">
          <% for (const t of ["transfer", "interest"]) { %>
            <option value="<%= t %>"><%= t %></option>
          <% } %>
        </select></td>
      </tr>
      <tr>
        <td><label for="net">Net</label></td>
        <td><input type="number" step="0.0001" id="net" name="net" /></td>
      </tr>
      <tr>
        <td><label for="brokerage">Brokerage</label></td>
        <td><select name="brokerage" id="brokerage">
          <% for (const t of env.BROKERAGES_LIST.split(",").map(e=>e.split("=")[0])) { %>
            <option value="<%= t %>"><%= t %></option>
          <% } %>
        </select></td>
      </tr>
      <tr>
        <td><label for="note_comment">Note (X)</label></td>
        <td><input type="text" id="note_comment" name="note_comment" /></td>
      </tr>
      <tr>
        <td></td>
        <td><input type="submit" value="Add Transaction" /></td>
      </tr>
    </table>
  </form>
</body>
</html>
